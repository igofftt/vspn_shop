<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="{{ meta.description }}">
    <meta name="author" content="{{ meta.author }}">
    <title>{{ meta.title }}</title>

    <script src="https://npmcdn.com/tether@1.2.4/dist/js/tether.min.js"></script>
    <script src="/js/jquery.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link href="/css/admin/bootstrap/bootstrap.css" rel="stylesheet" />
    <link href="/css/admin/plugins/iCheck/custom.css" rel="stylesheet" />
    <link href="/css/admin/style.css" rel="stylesheet">
    <!--select2-->
    <link href="/css/admin/plugins/select2/select2.min.css" rel="stylesheet" />
    <!-- fa icon -->
    <link href="/css/fa-icon/font-awesome.min.css" rel="stylesheet" />
    {{{ block "head" }}}
</head>

<body class="fixed-sidebar no-skin-config full-height-layout">
<div id="wrapper">
    {{#if left_menu }}
        <div class="row border-bottom">
            {{> admin/block/menu_top }}
        </div>
    {{/if}}

    <div id="page-wrapper" class="gray-bg">
        <div class="row">
            <div class="col col-md-2">
                {{#if left_menu }}
                    {{> admin/block/left-menu }}
                {{/if}}
            </div>
            <div class="col col-md-10">
                {{{ block "content" }}}
                {{{body}}}
            </div>
        </div>
    </div>

    {{> admin/block/footer }}
    <!-- Mainly scripts -->
    <script src="/js/admin/bootstrap/bootstrap.min.js"></script>
    <!-- iCheck -->
    <script src="/js/admin/plugins/iCheck/icheck.min.js"></script>
    <!--select2-->
    <script src="/js/admin/plugins/select2/select2.full.min.js"></script>
    <!-- custom-->
    <script src="/js/admin/custom.js"></script>

    <script src="/js/admin/adm.js"></script>
    <script>
        $(document).ready(function() {
            $.adm.initialize({
                url_req: '/',

                pram: [
                    ['elementsLoad', true],
                    ['link_module', '{{ table }}']
                ]
            });
        })
    </script>
    {{{ block "footer" }}}
</div>

<div class="container-editor" id="container-editor">
    <div class="fon">
        <div onclick="editM('hide')" class="close"><i class="fa fa-close"></i></div>
        <div class="body">
        </div>
    </div>
</div>

<script>
    $('.edit-link').click(function() {
        var table = $(this).data('table');
        var id = $(this).data('id');

        $.ajax({
            cache: false,
            url: '/admin/load-update/' + table + '/' + id,
            data: {id: id, table: table},
            type: 'post',
            dataType: 'html',
            success: function(data) {
                editM('show')
                $('#container-editor .body').html(data);
            }
        });
    });

    function editM(t) {
        if(t === 'show') {
            $('body').css({overflow: 'hidden'});

            $('#container-editor').animate({
                right: 0,
                opacity: 1,
            }, 500)

            setTimeout(function() {
                $('.container-editor .bottom-panel').animate({bottom: 0}, 800);
//                $('.container-editor .bottom-panel').width($('.container-editor .body').width() + 30);
            }, 400)

            setTimeout(function() {
                $('.container-editor .body').height($(window).height() - 95);
            }, 1300)

            $(window).resize(function() {
                $('.container-editor .body').height($(window).height() - 95);
            })
        }

        if(t === 'hide') {
            $('body').css({overflow: 'auto'});
            $('#container-editor').animate({
                right: '-100%',
                opacity: 0,
            }, 500)

            $('.container-editor .body').height($(window).height());
            $('#container-editor .body').html('');
        }
    }
</script>
</body>
</html>